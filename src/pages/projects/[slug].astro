---
import { siteConfig } from "../../config";
import Header from "../../components/Header.astro";
import Footer from "../../components/Footer.astro";
import "../../styles/global.css";
import { marked } from "marked";

export async function getStaticPaths() {
    return siteConfig.projects.map((project) => ({
        params: { slug: project.slug },
        props: { project },
    }));
}

const { project } = Astro.props;
const content = marked.parse(project.longDescription);
---

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <meta name="viewport" content="width=device-width" />
        <meta name="generator" content={Astro.generator} />
        <meta name="description" content={project.description} />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap"
            rel="stylesheet"
        />
        <title>{project.name} - {siteConfig.name}</title>
    </head>
    <body>
        <Header />
        <main class="p-8 sm:p-12 md:p-16 lg:p-24 min-h-screen">
            <div class="max-w-4xl mx-auto">
                <a
                    href="/#projects"
                    class="inline-flex items-center text-gray-600 hover:text-gray-900 mb-8 transition-colors"
                >
                    <svg
                        class="w-4 h-4 mr-2"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                    >
                        <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                    </svg>
                    Back to Projects
                </a>

                <div class="space-y-8">
                    <div>
                        <h1
                            class="text-3xl sm:text-4xl md:text-5xl font-bold text-gray-900 mb-4"
                        >
                            {project.name}
                        </h1>
                        <div class="flex flex-wrap gap-2">
                            {
                                project.skills.map((skill) => (
                                    <span class="px-3 py-1 bg-gray-100 text-gray-800 rounded-full text-sm font-medium">
                                        {skill}
                                    </span>
                                ))
                            }
                        </div>
                    </div>

                    <div
                        class="prose prose-lg max-w-none text-gray-600"
                        set:html={content}
                    />

                    {
                        project.images && project.images.length > 0 && (
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mt-12">
                                {project.images.map((image) => (
                                    <div class="rounded-xl overflow-hidden shadow-lg border border-gray-100">
                                        <img
                                            src={image}
                                            alt={`${project.name} screenshot`}
                                            class="w-full h-auto"
                                        />
                                    </div>
                                ))}
                            </div>
                        )
                    }

                    {
                        project.link && (
                            <div class="pt-8">
                                <a
                                    href={project.link}
                                    target="_blank"
                                    rel="noopener noreferrer"
                                    class="inline-flex items-center px-6 py-3 bg-gray-900 text-white rounded-lg font-medium hover:bg-gray-800 transition-colors"
                                >
                                    Visit Live Site
                                    <svg
                                        class="w-4 h-4 ml-2"
                                        fill="none"
                                        stroke="currentColor"
                                        viewBox="0 0 24 24"
                                    >
                                        <path
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                            stroke-width="2"
                                            d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"
                                        />
                                    </svg>
                                </a>
                            </div>
                        )
                    }
                </div>
            </div>
        </main>
        <Footer />
    </body>
</html>
